# Wakfu-Translate
Проект пользовательского перевода игры [WAKFU](http://www.wakfu.com/en/mmorpg)

VK страница-группа проекта: [Wakfu Русификатор](https://vk.com/club131505868)

Программа-русификатор: [Wakfu Mod Installer](https://dreamswork.github.io/Wakfu-Mod-Installer/)

## Оглавление
1.  [Требования](#require)
2.  [Создание файлов запуска игры / Обход STEAM / Обход лаунчера игры](#nosteam)
3.  [Создание файла с расширением bat (для тех, кто не знает как создать bat-файл)](#batcreate)
4.  [Установка Русификатора](#rusifikator)

### <a name="require"></a>Требования
bat-файлы используют команды powershell и для того, чтобы они правильно отработали, необходимо обновить powershell до последней версии (5.1)
Чтобы проверить версию powershell, нужно нажать сочетание клавиш win + r и в появившимся окне ввести powershell. Это запустит командную строку powershell.

После этого в появившемся окне нужно ввести 
```javascript
Get-Host | select version
```
или
```javascript
$PSVersionTable.PSVersion
```
[Обновление Powershell до 5 версии](https://www.microsoft.com/en-US/download/details.aspx?id=50395)

### <a name="nosteam"></a>Создание файлов запуска игры / Обход STEAM / Обход лаунчера игры
Когда-то Wakfu начал работать через сервис Steam, что послужило усложнению работы русификатора. Если запустить игру через Steam, то в случае, если вы до этого играли без него, игра будет просить авторизацию через Steam, чтобы связать вашего действующего персонажа с аккаунтом Steam. Таким образом произойдет импорт или объединение двух аккаунтов в один. Но это не означает, что игру нельзя будет запускать без наличия Steam. 

Основная проблема запуска Wakfu через этот игровой сервис, это авто-обновление и проверка файлов на подлинность, где, в случае отсутствия идентичности хотя бы у одного файла, произойдет перезапись этого файла, исключая таким образом любое вмешательство из вне в файлы игры. Это касается и запуск игры через steam и через официальный лаунчер игры.

Обход Steam / обход лаунчера игры, - это запуск игры Wakfu без авторизации через Steam и без запуска лаунчера игры, с сохранением текущего аккаунта и всех его персонажей для получения возможности, как минимум, общаться в игре на русском языке (кириллица) и, максимум, наличие перевода в некоторых местах игры.

Для этого понадобится программа [Process Explorer](https://technet.microsoft.com/ru-ru/bb896653.aspx). Скачать ее можно на сайте программы, либо по прямой [ссылке](http://download.sysinternals.com/files/ProcessExplorer.zip). 
Она нам понадобится для создания **bat** файла запуска игры с кастомными параметрами.

#### Шаги
* Запустить Process Explorer
* Запустить игру Wakfu через Steam, дождаться окончания обновления через авто-апдейтер, и запустить игру через появившееся окно запуска.
* Открыть Process Explorer и найти процесс java.exe, который будет находится в дереве Steam.exe

![Find Java](https://github.com/Valianton/Wakfu-Translate/blob/master/Assets/img/find_java.png)

* Вызвать свойства процесса java.exe

![Java propery](https://github.com/Valianton/Wakfu-Translate/blob/master/Assets/img/java_property.png)

* Скопировать строку в поле ввода Command line. Именно она запускает игру, применяя параметры, в том числе и авто-обновление игры

![Command line](https://github.com/Valianton/Wakfu-Translate/blob/master/Assets/img/command_line.png)

* Найти папку игры, если игра установлена через Staem, то обычно она лежит по пути 
```javascript
С:\Program Files\Steam\steamapps\common\Wakfu\game
```

* В папке с игрой создать bat-файл (например: wakfu.bat) и вставить в него скопированный выше текст. В конце вставленной строки вы должны найти и удалить последние параметры, чтобы не вызывать авто-обновление и автопроверку файлов
```javascript
--updater-service-port 58910 --partner steam --update-state uptodate
```

### <a name="batcreate"></a>Создание файла с расширением bat (для тех, кто не знает как создать bat-файл)
Для создания такого файла понадобится любой редактор текста, в том числе, самый обычный. Чтобы вызвать редактор текста, нужно нажать сочетание клавиш **win + r** и, в появившемся окне, набрать **notepad** и нажать **Enter**. Откроется блокнот (редактор текста), куда нужно вставить то, что вы скопировали в пункте выше, используя программу Process Explorer с удалением последних параметров
```javascript
--updater-service-port 58910 --partner steam --update-state uptodate
```
Затем, нужно сохранить файл используя сочетание клавиш **ctrl + s**, либо, при помощи панели управление блокнота (редактора текста) **Файл -> Сохранить**. 
В поле название файла введите **wakfu.bat**.
Стоит отметить, что файл нужно сохранять в кодировке **ANSI**. Выбор кодировки будет там же, где и кнопка сохранения.

### <a name="rusifikator"></a>Установка Русификатора

* Скачать архив [WRT](https://github.com/Valianton/Wakfu-Translate/raw/master/Instruments/wrt.rar) и распаковать его в каталоге игры (Wakfu/game).  Таким образом у вас появится три bat-файла.
 * **WRT_update.bat** - скачивает архив с последней версией русификатора и шрифтов (займет некоторое время). Его нужно запускать в первую очередь;
 * **WRT_chat.bat** - добавляет только поддержку кириллицы в чат игры. Запускайте только в том случае, если вас не интересует русский перевод игры, но хотели бы видеть русские буквы в чате;
 * **WRT_install.bat** - добавляет в игру поддержку кириллицы и русифицирует клиент.
